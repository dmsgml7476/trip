<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,
initial-scale=1.0">
<title>Insert title here</title>

<style>
  .hidden-input {
    display: none;
  }

  .horizontal-button {
    flex: 1;
    text-align: center;
    padding: 10px;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
  }

  .horizontal-button:hover {
    background-color: #eaeaea;
  }

  .icon-button-nobg {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    margin-left: 5px;
  }

  .icon-button-nobg:hover {
    color: #8266ff;
  }

  .submit-button {
    background-color: #8266ff;
    color: white;
    padding: 8px 18px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
  }

  .submit-button:hover {
    background-color: #6f55e0;
  }

  .submit-button.cancel {
    background-color: #ddd;
    color: black;
    margin-right: 10px;
  }

  .submit-button.cancel:hover {
    background-color: #ccc;
  }

  #tag-results div {
    background-color: #f0f0f0;
    padding: 5px 10px;
    border-radius: 5px;
    margin-top: 3px;
    cursor: pointer;
  }

  #tag-results div:hover {
    background-color: #ddd;
  }
</style>

</head>
<body>
		<th:block th:replace="story/mainMenu :: mainMenu"></th:block>

  			<div style="width: 70vw; margin: 40px auto; padding: 20px; border-radius: 10px; font-family: sans-serif; background: #fafafa;">
  
  <!-- ê¸€ ì‘ì„± ì˜ì—­ -->
  <form th:action="@{/weUpload}" th:object="${boardFormDto}" method="post" enctype="multipart/form-data">
  <textarea
    id="text-input"
    placeholder="í˜¸ì•µë‹˜ì˜ ì´ì•¼ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”."
    style="width: 100%; height: 360px; padding: 1em; font-size: 16px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box;"></textarea>

  <!-- ì²¨ë¶€ íŒŒì¼ ë²„íŠ¼ë“¤ (ê°€ë¡œ) -->
  <div style="display: flex; gap: 10px; margin-top: 15px;">
    <label class="horizontal-button">ğŸ“· ì‚¬ì§„/ë™ì˜ìƒ
      <input type="file" accept="image/*,video/*" class="hidden-input">
    </label>
    <label class="horizontal-button">ğŸ“ MYí”Œë˜ë„ˆ
      <input type="file" accept="image/*" class="hidden-input">
    </label>
    <label class="horizontal-button" id="link-toggle">ğŸ”— ë§í¬</label>
  </div>

  <!-- ë§í¬ ì…ë ¥ì°½ + ì €ì¥ -->
  <div id="link-input-container" style="display: none; margin-top: 10px;">
    <input type="url" id="link-url" placeholder="ì—¬í–‰í”Œë˜ë„ˆ URL ì…ë ¥" style="padding: 8px; width: 80%; border: 1px solid #ccc; border-radius: 6px;">
    <button onclick="saveLink()" class="submit-button" style="margin-left: 8px; padding: 8px 12px;">ì €ì¥</button>
  </div>

  <!-- ê³µê°œ, ëŒ“ê¸€, íƒœê·¸, ìœ„ì¹˜ -->
  <div style="display: flex; align-items: center; margin-top: 20px; gap: 10px; flex-wrap: wrap;">
    <select style="padding: 6px 12px; border-radius: 6px; border: 1px solid #ccc;">
      <option>ğŸŒ ì „ì²´ê³µê°œ</option>
      <option>ğŸ‘¥ ì¼ë¶€ê³µê°œ</option>
      <option>ğŸ”’ ë¹„ê³µê°œ</option>
    </select>

    <select style="padding: 6px 12px; border-radius: 6px; border: 1px solid #ccc;">
      <option>ğŸ’¬ ëŒ“ê¸€ í—ˆìš©</option>
      <option>ğŸš« ëŒ“ê¸€ ë¹„í—ˆìš©</option>
    </select>

    <button onclick="toggleTagSearch()" class="icon-button-nobg">ğŸ‘¤</button>
    <button onclick="showLocationChoice()" class="icon-button-nobg">ğŸ“</button>
  </div>

  <!-- ì¹œêµ¬ íƒœê·¸ ê²€ìƒ‰ -->
  <div id="tag-search-box" style="display: none; margin-top: 10px;">
    <input type="text" id="tag-input" placeholder="@ì•„ì´ë”” ì…ë ¥" style="padding: 6px; width: 40%; border-radius: 6px; border: 1px solid #ccc;" onkeyup="searchUser()">
    <div id="tag-results" style="margin-top: 5px;"></div>
  </div>

  <!-- ì²¨ë¶€ëœ ë§í¬ ì¶œë ¥ -->
  <div id="saved-link-container" style="margin-top: 30px;"></div>

  <!-- í•˜ë‹¨ ë²„íŠ¼ -->
  <div style="margin-top: 25px; text-align: right;">
    <button onclick="cancelPost()" class="submit-button cancel">ì·¨ì†Œ</button>
    <button onclick="submitPost()" class="submit-button">ì˜¬ë¦¬ê¸°</button>
  </div>
</div>
</form>

<script>
  const mockUsers = ['@hong123', '@kim_travel', '@leeho', '@travel_love'];

  // ê¸€ ì…ë ¥ ì´ˆê¸°í™”
  document.getElementById('text-input').addEventListener('focus', function () {
    if (this.value === 'í˜¸ì•µë‹˜ì˜ ì´ì•¼ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.') this.value = '';
  });

  // ë§í¬ ì…ë ¥ì°½ ì—´ê¸°
  document.getElementById('link-toggle').addEventListener('click', () => {
    const box = document.getElementById('link-input-container');
    box.style.display = box.style.display === 'none' ? 'block' : 'none';
  });

  // ë§í¬ ì €ì¥ ë° í•˜ë‹¨ ì¶œë ¥
  function saveLink() {
    const link = document.getElementById('link-url').value;
    if (link) {
      document.getElementById('saved-link-container').innerHTML =
        `<p>ğŸ”— ì¶”ê°€ëœ ë§í¬: <a href="${link}" target="_blank">${link}</a></p>`;
      document.getElementById('link-url').value = '';
      document.getElementById('link-input-container').style.display = 'none';
    }
  }

  // ì¹œêµ¬ íƒœê·¸ í† ê¸€
  function toggleTagSearch() {
    const tagBox = document.getElementById('tag-search-box');
    tagBox.style.display = tagBox.style.display === 'none' ? 'block' : 'none';
  }

  // ì¹œêµ¬ ì•„ì´ë”” ìë™ì™„ì„± ê²€ìƒ‰
  function searchUser() {
    const input = document.getElementById('tag-input').value.toLowerCase();
    const resultBox = document.getElementById('tag-results');
    resultBox.innerHTML = '';
    if (input.startsWith('@')) {
      const results = mockUsers.filter(u => u.includes(input));
      results.forEach(user => {
        const div = document.createElement('div');
        div.textContent = user;
        div.onclick = () => {
          document.getElementById('tag-input').value = user;
          resultBox.innerHTML = '';
        };
        resultBox.appendChild(div);
      });
    }
  }
  // ìœ„ì¹˜ alert
  function showLocationChoice() {
  const allow = confirm("ìœ„ì¹˜ ì ‘ê·¼ì„ í—ˆìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
  if (allow) {
    alert("ìœ„ì¹˜ ì ‘ê·¼ì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
  } else {
    alert("ìœ„ì¹˜ ì ‘ê·¼ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }
}

  // ì·¨ì†Œ / ì˜¬ë¦¬ê¸°
  function cancelPost() {
    alert("ì‘ì„± ë‚´ìš©ì´ ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    window.location.href = "/weStory";
  }

  function submitPost() {
    alert("ìŠ¤í† ë¦¬ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
    window.location.href = "/myStory";
  }
</script>
		
		
		<th:block th:replace="story/mainFooter :: mainFooter"></th:block>

</body>
</html>